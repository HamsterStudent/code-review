<!--@layout(/layout/basic/layout.html)-->
<!--@js(/drmvsn/js/about-only.js)-->

<div class="custom-page hope-about">
  <div class="about-intro">
      <div class="title-area">
          <h2 class="title">ABOUT</h2>
      </div>
  </div>
  <div class="about-list-wrap">
      <ul class="about-list flex">
          <li><a class="current" href="#maison">MAISON PLAISANT</a></li>
          <li><a href="#latelier">LATELIER</a></li>
          <li><a href="#comptoir">COMPTOIR</a></li>
          <li><a href="#hope-inte">HOPE INTL</a></li>
      </ul>
  </div>
  
  <section id="maison" class="about-section current mt-15">
  </section>

  <section id="latelier" class="about-section mt-30">
  </section>

  <section id="comptoir" class="about-section mt-30">
  </section>
  
  <section id="hope-inte" class="about-section bg-white mt-30">
  </section>
</div>

<script>
  window.addEventListener('scroll', () => {
      const tabPosition = document.querySelector('.about-list-wrap').offsetTop;
      const currentPosition = window.scrollY;
      if (currentPosition > tabPosition) {
          document.body.classList.add('fixed-tab');
      } else {
      document.body.classList.remove('fixed-tab');
      }
  });

  
  window.addEventListener('scroll', function () {
      const sectionGuidePaddingTop = 160;
      let mainbTabPDP = document.querySelectorAll('.about-list a');

      let posAPDP = document.getElementById('maison').offsetTop - sectionGuidePaddingTop;
      let posBPDP = document.getElementById('latelier').offsetTop - sectionGuidePaddingTop;
      let posCPDP = document.getElementById('comptoir').offsetTop - sectionGuidePaddingTop;
      let posDPDP = document.getElementById('hope-inte').offsetTop - sectionGuidePaddingTop;

      if (document.querySelector('.about-list a.current') !== null) {
          document.querySelector('.about-list a.current').classList.remove('current');
      }

      if (window.scrollY > posAPDP && window.scrollY < posBPDP) {
          mainbTabPDP[0].classList.add('current');
      }
      if (window.scrollY > posBPDP && window.scrollY < posCPDP) {
          mainbTabPDP[1].classList.add('current');
      }
      if (window.scrollY > posCPDP && window.scrollY < posDPDP) {
          mainbTabPDP[2].classList.add('current');
      }
      if (window.scrollY > posDPDP) {
          mainbTabPDP[3].classList.add('current');
      }
  });


  document.querySelectorAll(".about-list a").forEach((el)=>{
      el.addEventListener("click", (e)=>{
          e.preventDefault();
          window.scrollTo({
              top: document.querySelector(el.getAttribute('href')).getBoundingClientRect().top + window.scrollY - 108, 
              behavior: "smooth"
          })
      })
  })
</script>